<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Profile - Shoplink</title>
    <link rel="stylesheet" href="./css.style/style.css">
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-C7Y4Z4F2YG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-C7Y4Z4F2YG');
</script>
<style>
body {
    background: #f9f6ff;
    font-family: 'Segoe UI', Arial, sans-serif;
    margin: 0;
    padding: 0;
}
.profile-container {
    max-width: 420px;
    margin: 2.5rem auto 1.5rem auto;
    background: #fff;
    border-radius: 14px;
    box-shadow: 0 4px 18px rgba(123,47,242,0.10);
    padding: 2rem 2.2rem 1.5rem 2.2rem;
}
.profile-container h1 {
    color: #7b2ff2;
    text-align: center;
    margin-bottom: 1.5rem;
    font-size: 2rem;
    font-weight: 700;
}
.form-group {
    margin-bottom: 1.2rem;
}
.form-group label {
    display: block;
    margin-bottom: 0.4rem;
    color: #7b2ff2;
    font-weight: 500;
}
.form-group input[type="text"],
.form-group input[type="email"],
.form-group input[type="file"],
.form-group select,
.form-group textarea {
    width: 100%;
    border: 1.5px solid #7b2ff2;
    border-radius: 8px;
    padding: 0.6rem;
    font-size: 1rem;
    margin-top: 0.2rem;
    box-sizing: border-box;
}
.form-group textarea {
    resize: vertical;
}
#profile-picture-preview img {
    max-width: 90px;
    max-height: 90px;
    border-radius: 50%;
    margin-top: 0.5rem;
    border: 2px solid #7b2ff2;
    display: block;
}
button[type="submit"], #logout-btn {
    background: linear-gradient(90deg, #7b2ff2 0%, #f357a8 100%);
    color: #fff;
    border: none;
    border-radius: 6px;
    padding: 0.8rem 0;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    width: 100%;
    margin-top: 0.7rem;
    transition: background 0.2s;
}
button[type="submit"]:hover, #logout-btn:hover {
    background: linear-gradient(90deg, #f357a8 0%, #7b2ff2 100%);
}
#logout-btn {
    background: #fff;
    color: #7b2ff2;
    border: 1.5px solid #7b2ff2;
    margin-top: 1.2rem;
}
#logout-btn:hover {
    background: #7b2ff2;
    color: #fff;
}
#profile-loading, #post-loading {
    font-size: 1rem;
}
#post-section {
    max-width: 420px;
    margin: 2rem auto 1.5rem auto;
    background: #fff;
    border-radius: 14px;
    box-shadow: 0 4px 18px rgba(123,47,242,0.10);
    padding: 1.5rem 2.2rem 1.5rem 2.2rem;
}
#post-section h2 {
    color: #7b2ff2;
    text-align: center;
    margin-bottom: 1rem;
    font-size: 1.3rem;
    font-weight: 600;
}
#customer-posts-section {
    max-width: 420px;
    margin: 2rem auto 1.5rem auto;
}
#posts-container {
    max-width: 420px;
    margin: 2rem auto 1.5rem auto;
}
.posts-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.7rem;
    color: #7b2ff2;
    font-weight: 500;
    margin-top: 1.5rem;
}
.spinner {
    width: 22px;
    height: 22px;
    border: 3px solid #f3e6ff;
    border-top: 3px solid #7b2ff2;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}
@keyframes spin {
    0% { transform: rotate(0deg);}
    100% { transform: rotate(360deg);}
}
@media (max-width: 600px) {
    .profile-container, #post-section, #customer-posts-section, #posts-container {
        max-width: 98vw;
        padding: 1rem 0.5rem;
    }
}
.profile-picture-upload {
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}
.profile-picture-label {
    display: inline-block;
    position: relative;
    cursor: pointer;
}
.profile-picture-label img {
    width: 90px;
    height: 90px;
    border-radius: 50%;
    border: 2px solid #7b2ff2;
    object-fit: cover;
    background: #f9f6ff;
    transition: box-shadow 0.2s;
}
.profile-picture-label:hover img {
    box-shadow: 0 0 0 4px #f357a833;
}
.profile-picture-plus {
    position: absolute;
    bottom: 0;
    right: 0;
    background: #7b2ff2;
    color: #fff;
    border-radius: 50%;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    border: 2px solid #fff;
    box-shadow: 0 2px 8px #7b2ff233;
    z-index: 2;
    pointer-events: none;
}
</style>
</head>
<body>
    <div class="profile-container">
        <h1>Your Profile</h1>
        <form id="profile-form" enctype="multipart/form-data">
               <div class="form-group" style="text-align:center;">
                <label for="profile-picture" style="display:block; margin-bottom:0.7rem; color:#7b2ff2; font-weight:500;">Profile Picture</label>
                <div class="profile-picture-upload">
                    <input type="file" id="profile-picture" name="profilePicture" accept="image/*" capture="user" style="display:none;">
                    <label for="profile-picture" class="profile-picture-label" title="Choose or take a photo">
                        <span class="profile-picture-plus">+</span>
                        <img id="profile-picture-preview-img" src="https://ui-avatars.com/api/?name=User" alt="Profile Picture" />
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label for="profile-username">Username</label>
                <input type="text" id="profile-username" name="username" required>
            </div>
            <div class="form-group">
                <label for="profile-email">Email</label>
                <input type="email" id="profile-email" name="email" required readonly>
            </div>
            <div class="form-group">
                <label for="profile-role">Role</label>
                <select id="profile-role" name="role" required disabled>
                    <option value="CEO">CEO</option>
                    <option value="Customer">Customer</option>
                </select>
            </div>
            <div class="form-group">
                <label for="profile-bio">Bio</label>
                <textarea id="profile-bio" name="bio" rows="3" placeholder="Write something about yourself..."></textarea>
            </div>
         
            <button type="submit" id="profile-submit-btn">Update Profile</button>
            <div id="profile-loading" style="display:none; color:#833ab4; text-align:center; margin-top:10px;">Updating...</div>
        </form>
        <button id="logout-btn">Logout</button>
    </div>

    <div id="post-section" style="display:none;">
        <h2>Create a Post</h2>
        <form id="post-form" enctype="multipart/form-data">
            <textarea id="post-content" name="content" rows="3" placeholder="Write your post..." required></textarea>
            <input type="file" id="post-video" name="video" accept="video/*">
            <button type="submit" id="post-submit-btn">Post</button>
            <div id="post-loading" style="display:none; color:#833ab4; text-align:center; margin-top:10px;">Posting...</div>
        </form>
    </div>

    <!-- Only visible to Customers -->
    <div id="customer-posts-section"></div>

    <div id="posts-container"></div>
    <div id="posts-loading" class="posts-loading" style="display:none;">
      <div class="spinner"></div>
      <span>Loading your posts...</span>
    </div>

    <script src="./profile.js"></script>
</body>
</html>